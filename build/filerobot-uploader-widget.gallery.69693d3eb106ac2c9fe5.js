(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{365:function(e,t,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var _=0;_<t.length;_++){var r=t[_];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,_,r){return _&&e(t.prototype,_),r&&e(t,r),t}}(),n=_(1),i=h(n),a=_(125),o=_(132),l=_(61),u=_(127),s=_(62),p=h(_(695)),c=_(342),d=_(39);function h(e){return e&&e.__esModule?e:{default:e}}var f={DEFAULT:"DEFAULT",UPLOADING:"UPLOADING",ERROR:"ERROR",UPLOADED:"UPLOADED"},E=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onGetListFiles=function(){return e.__onGetListFiles__REACT_HOT_LOADER__.apply(e,arguments)},e.activateFolder=function(){return e.__activateFolder__REACT_HOT_LOADER__.apply(e,arguments)},e.fileChangeHandler=function(){return e.__fileChangeHandler__REACT_HOT_LOADER__.apply(e,arguments)},e.isFilesValid=function(){return e.__isFilesValid__REACT_HOT_LOADER__.apply(e,arguments)},e.changeFile=function(){return e.__changeFile__REACT_HOT_LOADER__.apply(e,arguments)},e.upload=function(){return e.__upload__REACT_HOT_LOADER__.apply(e,arguments)},e.changeStep=function(){return e.__changeStep__REACT_HOT_LOADER__.apply(e,arguments)},e.uploadStart=function(){return e.__uploadStart__REACT_HOT_LOADER__.apply(e,arguments)},e.uploadSuccess=function(){return e.__uploadSuccess__REACT_HOT_LOADER__.apply(e,arguments)},e.uploadError=function(){return e.__uploadError__REACT_HOT_LOADER__.apply(e,arguments)},e.fileDropHandler=function(){return e.__fileDropHandler__REACT_HOT_LOADER__.apply(e,arguments)},e.onDragEvent=function(){return e.__onDragEvent__REACT_HOT_LOADER__.apply(e,arguments)},e.search=function(){return e.__search__REACT_HOT_LOADER__.apply(e,arguments)},e.renderNavigation=function(){return e.__renderNavigation__REACT_HOT_LOADER__.apply(e,arguments)},e.state={searchPhrase:"",activeFolder:null,isLoading:!1,imagesIndex:0,files:[]},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.Component),r(t,[{key:"__renderNavigation__REACT_HOT_LOADER__",value:function(){return this.__renderNavigation__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__search__REACT_HOT_LOADER__",value:function(){return this.__search__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__onDragEvent__REACT_HOT_LOADER__",value:function(){return this.__onDragEvent__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__fileDropHandler__REACT_HOT_LOADER__",value:function(){return this.__fileDropHandler__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__uploadError__REACT_HOT_LOADER__",value:function(){return this.__uploadError__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__uploadSuccess__REACT_HOT_LOADER__",value:function(){return this.__uploadSuccess__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__uploadStart__REACT_HOT_LOADER__",value:function(){return this.__uploadStart__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__changeStep__REACT_HOT_LOADER__",value:function(){return this.__changeStep__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__upload__REACT_HOT_LOADER__",value:function(){return this.__upload__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__changeFile__REACT_HOT_LOADER__",value:function(){return this.__changeFile__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__isFilesValid__REACT_HOT_LOADER__",value:function(){return this.__isFilesValid__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__fileChangeHandler__REACT_HOT_LOADER__",value:function(){return this.__fileChangeHandler__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__activateFolder__REACT_HOT_LOADER__",value:function(){return this.__activateFolder__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__onGetListFiles__REACT_HOT_LOADER__",value:function(){return this.__onGetListFiles__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"componentDidMount",value:function(){var e=this.props.uploaderConfig.folders;if(e.length){var t=e[0];this.setState({activeFolder:t}),this.onGetListFiles(t.dir)}}},{key:"__onGetListFiles__REACT_HOT_LOADER__",value:function(e){var t=this;this.setState({isLoading:!0});var _=this.props.uploaderConfig.container;(0,o.getListFiles)({dir:e,container:_}).then(function(e){t.setState({files:e,isLoading:!1,imagesIndex:t.state.imagesIndex+1})})}},{key:"__activateFolder__REACT_HOT_LOADER__",value:function(e){this.setState({activeFolder:e,files:[]}),this.onGetListFiles(e.dir)}},{key:"__fileChangeHandler__REACT_HOT_LOADER__",value:function(e){var t=e.target;this.changeFile(t.files)}},{key:"__isFilesValid__REACT_HOT_LOADER__",value:function(e){return!0}},{key:"__changeFile__REACT_HOT_LOADER__",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.setState({filesToUpload:t}),setTimeout(function(){t&&e.isFilesValid(t)&&e.upload()})}},{key:"__upload__REACT_HOT_LOADER__",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.state.activeFolder,n=this.props;this.uploadStart(),(t?this.props.onFileUploadFromUrl(_,this.props.uploaderConfig):this.props.onFilesUpload(this.state.filesToUpload,this.props.uploaderConfig,"files[]",r.dir)).then(function(t){if(e.uploadSuccess(t),e.props.uploaderConfig.tagging.active)return e.props.saveUploadedFiles(t),void e.props.setPostUpload(!0,"TAGGING","UPLOADED_IMAGES");n.uploaderConfig.uploadHandler(t),n.modalClose()}).catch(function(t){e.uploadError(t.msg)})}},{key:"__changeStep__REACT_HOT_LOADER__",value:function(e){return this.setState({step:e})}},{key:"__uploadStart__REACT_HOT_LOADER__",value:function(){return this.setState({step:f.UPLOADING,files:[]})}},{key:"__uploadSuccess__REACT_HOT_LOADER__",value:function(e){this.setState({step:f.UPLOADED,uploadedFiles:e,isDragOver:!1}),this.onGetListFiles(this.state.activeFolder.dir)}},{key:"__uploadError__REACT_HOT_LOADER__",value:function(e){var t=this,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.setState({step:f.ERROR,errorMsg:e||d.I18n.t("upload.error")}),_&&setTimeout(function(){return t.changeStep(f.DEFAULT)},_)}},{key:"__fileDropHandler__REACT_HOT_LOADER__",value:function(e){e.preventDefault(),this.changeFile((e.dataTransfer||e.originalEvent.dataTransfer).files)}},{key:"__onDragEvent__REACT_HOT_LOADER__",value:function(e,t,_){e.preventDefault(),this.setState(function(e,t,_){return t in e?Object.defineProperty(e,t,{value:_,enumerable:!0,configurable:!0,writable:!0}):e[t]=_,e}({},t,_))}},{key:"__search__REACT_HOT_LOADER__",value:function(){var e=this;this.setState({isLoading:!0});var t=this.state,_=t.searchPhrase,r=void 0===_?"":_,n=t.imagesIndex,i=this.props.uploaderConfig.container;(0,o.searchFiles)({query:r,container:i}).then(function(t){e.setState({files:t,isLoading:!1,imagesIndex:n+1})})}},{key:"render",value:function(){var e=this,t=this.state,_=t.isLoading,r=t.step,n=t.files,o=t.isDragOver,l=t.imagesIndex;return i.default.createElement(a.UploadedImages,null,i.default.createElement(a.UploadInputBox,{type:"file",name:"files[]",innerRef:function(t){return e.fileInput=t},"data-multiple-caption":"{count} files selected",defaultValue:"",tabIndex:-1,multiple:!0,onChange:this.fileChangeHandler}),i.default.createElement(a.HeaderWrap,null,this.renderNavigation(),i.default.createElement(a.SearchWrapper,null,i.default.createElement(a.SearchGroup,{padding:"0px"},i.default.createElement(a.InputSearch,{type:"search",innerRef:function(t){return e._searchInput=t},autoFocus:!0,defaultValue:"",placeholder:d.I18n.t("file_manager.search_by_file_name_tag_desc"),onKeyDown:function(t){return(0,c.isEnterClick)(t)&&e.search()}}),i.default.createElement(a.ButtonSearch,{key:"ok",className:"ae-btn",onClick:this.search},d.I18n.t("upload.search")))),i.default.createElement(a.ButtonSearch,{className:"ae-btn",fullBr:"4px",onClick:function(){e.fileInput.click()}},d.I18n.t("file_manager.upload_images"))),i.default.createElement(p.default,{imagesIndex:l,onDragEvent:this.onDragEvent,fileDropHandler:this.fileDropHandler,isDragOver:o,saveUploadedFiles:this.props.saveUploadedFiles,setPostUpload:this.props.setPostUpload,files:n,onClose:this.props.onClose}),i.default.createElement(s.Spinner,{overlay:!0,show:_||r===f.UPLOADING}))}},{key:"__renderNavigation__REACT_HOT_LOADER__",value:function(){var e=this,t=this.props.uploaderConfig,_=this.state.activeFolder,r=void 0===_?{}:_,n=t.folders;if(n.length)return i.default.createElement(a.Nav,null,n.map(function(t){return i.default.createElement(a.NavItem,{role:"menuitem",tabIndex:0,onKeyDown:function(_){13===_.keyCode&&e.activateFolder(t)},onClick:e.activateFolder.bind(e,t),active:t.dir===(r&&r.dir),key:t.dir},t.label)}))}}]),t}(),O=(0,l.connect)(function(e){return{uploaderConfig:e.uploader.uploaderConfig}},{onFilesUpload:u.uploadFilesToDir,onFileUploadFromUrl:u.uploadFilesFromUrls,modalClose:u.modalClose})(E);t.default=O;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(f,"STEP","/Users/dmitry/2017/airstore-uploader-react/projects/react-plugin/components/UploadedImagesTab/UploadedImagesTab.js"),__REACT_HOT_LOADER__.register(E,"UploadedImagesTab","/Users/dmitry/2017/airstore-uploader-react/projects/react-plugin/components/UploadedImagesTab/UploadedImagesTab.js"),__REACT_HOT_LOADER__.register(O,"default","/Users/dmitry/2017/airstore-uploader-react/projects/react-plugin/components/UploadedImagesTab/UploadedImagesTab.js"))},670:function(e,t,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.getColumnCount=function(e,t,_){return Math.floor((e+_)/(t+_))},n=t.getColumnWidth=function(e,t,_){return(e-(t-1)*_)/t},i=t.getActualColumnWidth=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=r(e,t,_);return n(e,i,_)},a=t.getResizeImageUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return"https://scaleflex.cloudimg.io/width/"+Math.round(t)+"/s/"+e},o=t.getFitResizeImageUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return"https://scaleflex.cloudimg.io/fit/"+Math.round(t)+"x"+Math.round(_)+"/ffffff/"+e},l=t.getCropImageUrl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return"https://scaleflex.cloudimg.io/crop/"+Math.round(t)+"x"+Math.round(_)+"/s/"+e};"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"getColumnCount","/Users/dmitry/2017/airstore-uploader-react/projects/react-plugin/services/imageGrid.service.js"),__REACT_HOT_LOADER__.register(n,"getColumnWidth","/Users/dmitry/2017/airstore-uploader-react/projects/react-plugin/services/imageGrid.service.js"),__REACT_HOT_LOADER__.register(i,"getActualColumnWidth","/Users/dmitry/2017/airstore-uploader-react/projects/react-plugin/services/imageGrid.service.js"),__REACT_HOT_LOADER__.register(a,"getResizeImageUrl","/Users/dmitry/2017/airstore-uploader-react/projects/react-plugin/services/imageGrid.service.js"),__REACT_HOT_LOADER__.register(o,"getFitResizeImageUrl","/Users/dmitry/2017/airstore-uploader-react/projects/react-plugin/services/imageGrid.service.js"),__REACT_HOT_LOADER__.register(l,"getCropImageUrl","/Users/dmitry/2017/airstore-uploader-react/projects/react-plugin/services/imageGrid.service.js"))},673:function(e,t,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var _=0;_<t.length;_++){var r=t[_];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,_,r){return _&&e(t.prototype,_),r&&e(t,r),t}}(),n=l(_(1)),i=_(682),a=_(672),o=l(_(670));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var _ in e)Object.prototype.hasOwnProperty.call(e,_)&&(t[_]=e[_]);return t.default=e,t}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var _=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return _._calculateColumnCount=function(){return _.___calculateColumnCount__REACT_HOT_LOADER__.apply(_,arguments)},_._cellRenderer=function(){return _.___cellRenderer__REACT_HOT_LOADER__.apply(_,arguments)},_._initCellPositioner=function(){return _.___initCellPositioner__REACT_HOT_LOADER__.apply(_,arguments)},_._onResize=function(){return _.___onResize__REACT_HOT_LOADER__.apply(_,arguments)},_._renderAutoSizer=function(){return _.___renderAutoSizer__REACT_HOT_LOADER__.apply(_,arguments)},_.onScroll=function(){return _.__onScroll__REACT_HOT_LOADER__.apply(_,arguments)},_._renderMasonry=function(){return _.___renderMasonry__REACT_HOT_LOADER__.apply(_,arguments)},_._resetCellPositioner=function(){return _.___resetCellPositioner__REACT_HOT_LOADER__.apply(_,arguments)},_._setMasonryRef=function(){return _.___setMasonryRef__REACT_HOT_LOADER__.apply(_,arguments)},_._columnWidth=e.columnWidth||200,_._gutterSize=e.gutterSize||10,_._columnCount=0,_._cache=new i.CellMeasurerCache({defaultHeight:e.imageContainerHeight||300,defaultWidth:_._columnWidth,fixedWidth:!1}),_.state={columnWidth:_._columnWidth,height:e.imageContainerHeight||300,gutterSize:_._gutterSize,overscanByPixels:0,windowScrollerEnabled:!1},_}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n.PureComponent),r(t,[{key:"___setMasonryRef__REACT_HOT_LOADER__",value:function(){return this.___setMasonryRef__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"___resetCellPositioner__REACT_HOT_LOADER__",value:function(){return this.___resetCellPositioner__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"___renderMasonry__REACT_HOT_LOADER__",value:function(){return this.___renderMasonry__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__onScroll__REACT_HOT_LOADER__",value:function(){return this.__onScroll__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"___renderAutoSizer__REACT_HOT_LOADER__",value:function(){return this.___renderAutoSizer__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"___onResize__REACT_HOT_LOADER__",value:function(){return this.___onResize__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"___initCellPositioner__REACT_HOT_LOADER__",value:function(){return this.___initCellPositioner__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"___cellRenderer__REACT_HOT_LOADER__",value:function(){return this.___cellRenderer__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"___calculateColumnCount__REACT_HOT_LOADER__",value:function(){return this.___calculateColumnCount__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"render",value:function(){var e=this.state,t=e.overscanByPixels,_=e.windowScrollerEnabled,r=e.height;return _?n.createElement(i.WindowScroller,{overscanByPixels:t},this._renderAutoSizer):this._renderAutoSizer({height:r})}},{key:"___calculateColumnCount__REACT_HOT_LOADER__",value:function(){var e=this.state,t=e.columnWidth,_=e.gutterSize;this._columnCount=o.getColumnCount(this._width,t,_)}},{key:"___cellRenderer__REACT_HOT_LOADER__",value:function(e){var t=e.index,_=e.key,r=e.parent,a=e.style,o=this.props,l=o.list,u=o.cellContent,s=this.state.columnWidth,p=l[t];return n.createElement(i.CellMeasurer,{cache:this._cache,index:t,key:_,parent:r},u({style:a,columnWidth:s,item:p,index:t,key:_}))}},{key:"___initCellPositioner__REACT_HOT_LOADER__",value:function(){if(void 0===this._cellPositioner){var e=this.state,t=e.columnWidth,_=e.gutterSize;this._cellPositioner=(0,a.createCellPositioner)({cellMeasurerCache:this._cache,columnCount:this._columnCount,columnWidth:t,spacer:_})}}},{key:"___onResize__REACT_HOT_LOADER__",value:function(e){var t=e.width;t&&(this._width=t),this._calculateColumnCount(),this._resetCellPositioner(),this._setMasonryRef.recomputeCellPositions()}},{key:"___renderAutoSizer__REACT_HOT_LOADER__",value:function(e){var t=this,_=e.height,r=e.scrollTop;this._height=_,this._scrollTop=r;var a=this.state.overscanByPixels;return n.createElement(i.AutoSizer,{ref:function(e){return t.child=e},disableHeight:!0,height:_,onResize:this._onResize,overscanByPixels:a,scrollTop:this._scrollTop},this._renderMasonry)}},{key:"__onScroll__REACT_HOT_LOADER__",value:function(e){var t=e.clientHeight,_=e.scrollHeight,r=e.scrollTop,n=this,i=this.props,a=i.isShowMoreImages;i.onShowMoreImages&&t+r+600>=_&&!a&&this.props.onShowMoreImages(function(){var e=document.querySelector("div.resize-triggers").parentNode;"9px"===e.style.paddingLeft?e.style.paddingLeft="10px":e.style.paddingLeft="9px","9px"===e.style.paddingRight?e.style.paddingRight="10px":e.style.paddingRight="9px",n.child._onResize()})}},{key:"___renderMasonry__REACT_HOT_LOADER__",value:function(e){var t=this,_=e.width;this._width=_,this._calculateColumnCount(),this._initCellPositioner();var r=this.props.count,a=this.state,o=a.height,l=a.overscanByPixels,u=a.windowScrollerEnabled;return n.createElement(i.Masonry,{autoHeight:u,cellCount:r,cellMeasurerCache:this._cache,cellPositioner:this._cellPositioner,cellRenderer:this._cellRenderer,height:u?this._height:o,overscanByPixels:l,ref:function(e){return t._setMasonryRef=e},scrollTop:this._scrollTop,width:_,onScroll:this.onScroll,tabIndex:-1})}},{key:"___resetCellPositioner__REACT_HOT_LOADER__",value:function(){var e=this.state,t=e.columnWidth,_=e.gutterSize;this._cellPositioner.reset({columnCount:this._columnCount,columnWidth:t,spacer:_})}},{key:"___setMasonryRef__REACT_HOT_LOADER__",value:function(e){this._masonry=e}}]),t}(),s=u;t.default=s;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(u,"ReactVirtualizedImagesGrid","/Users/dmitry/2017/airstore-uploader-react/projects/react-plugin/components/VirtualizedImagesGrid.js"),__REACT_HOT_LOADER__.register(s,"default","/Users/dmitry/2017/airstore-uploader-react/projects/react-plugin/components/VirtualizedImagesGrid.js"))},695:function(e,t,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var _=arguments[t];for(var r in _)Object.prototype.hasOwnProperty.call(_,r)&&(e[r]=_[r])}return e},n=function(){function e(e,t){for(var _=0;_<t.length;_++){var r=t[_];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,_,r){return _&&e(t.prototype,_),r&&e(t,r),t}}(),i=_(1),a=d(i),o=_(125),l=_(61),u=_(127),s=d(_(673)),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var _ in e)Object.prototype.hasOwnProperty.call(e,_)&&(t[_]=e[_]);return t.default=e,t}(_(670)),c=_(39);function d(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.getImageGridWrapperWidth=function(){return e.__getImageGridWrapperWidth__REACT_HOT_LOADER__.apply(e,arguments)},e.getImageGridWrapperHeight=function(){return e.__getImageGridWrapperHeight__REACT_HOT_LOADER__.apply(e,arguments)},e.updateImageGridColumnWidth=function(){return e.__updateImageGridColumnWidth__REACT_HOT_LOADER__.apply(e,arguments)},e.onKeyDown=function(){return e.__onKeyDown__REACT_HOT_LOADER__.apply(e,arguments)},e.upload=function(){return e.__upload__REACT_HOT_LOADER__.apply(e,arguments)},e.onEditImage=function(){return e.__onEditImage__REACT_HOT_LOADER__.apply(e,arguments)},e.renderImage=function(){return e.__renderImage__REACT_HOT_LOADER__.apply(e,arguments)},e.renderUploadBox=function(){return e.__renderUploadBox__REACT_HOT_LOADER__.apply(e,arguments)},e.state={imageGridWrapperWidth:0,imageContainerHeight:0,imageGrid:{columnWidth:0,gutterSize:10,minColumnWidth:200}},e.imageGridWrapperRef=a.default.createRef(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),n(t,[{key:"__renderUploadBox__REACT_HOT_LOADER__",value:function(){return this.__renderUploadBox__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__renderImage__REACT_HOT_LOADER__",value:function(){return this.__renderImage__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__onEditImage__REACT_HOT_LOADER__",value:function(){return this.__onEditImage__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__upload__REACT_HOT_LOADER__",value:function(){return this.__upload__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__onKeyDown__REACT_HOT_LOADER__",value:function(){return this.__onKeyDown__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__updateImageGridColumnWidth__REACT_HOT_LOADER__",value:function(){return this.__updateImageGridColumnWidth__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getImageGridWrapperHeight__REACT_HOT_LOADER__",value:function(){return this.__getImageGridWrapperHeight__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"__getImageGridWrapperWidth__REACT_HOT_LOADER__",value:function(){return this.__getImageGridWrapperWidth__REACT_HOT_LOADER__.apply(this,arguments)}},{key:"componentDidMount",value:function(){this.updateImageGridColumnWidth()}},{key:"componentDidUpdate",value:function(e,t){this.imageGridWrapperRef.current&&this.getImageGridWrapperWidth()!==t.imageGridWrapperWidth&&this.updateImageGridColumnWidth()}},{key:"__getImageGridWrapperWidth__REACT_HOT_LOADER__",value:function(){return Math.floor(this.imageGridWrapperRef.current.getBoundingClientRect().width)}},{key:"__getImageGridWrapperHeight__REACT_HOT_LOADER__",value:function(){return this.imageGridWrapperRef.current.getBoundingClientRect().height+20}},{key:"__updateImageGridColumnWidth__REACT_HOT_LOADER__",value:function(){var e=this.state.imageGrid,t=e.minColumnWidth,_=e.gutterSize,r=this.getImageGridWrapperWidth(),n=this.getImageGridWrapperHeight();e.columnWidth=p.getActualColumnWidth(r,t,_),this.setState({imageGridWrapperWidth:r,imageGrid:e,imageContainerHeight:n})}},{key:"__onKeyDown__REACT_HOT_LOADER__",value:function(e,t){13===e&&(e.stopPropagation(),this.upload(t))}},{key:"__upload__REACT_HOT_LOADER__",value:function(e){var t=[r({},e,{public_link:e.url_permalink})];this.props.uploaderConfig.uploadHandler(t),this.props.onClose&&this.props.onClose(),this.props.onModalClose()}},{key:"__onEditImage__REACT_HOT_LOADER__",value:function(e,t){if(e.preventDefault(),e.stopPropagation(),this.props.uploaderConfig.tagging.active){var _=[r({},t,{public_link:t.url_permalink})];this.props.saveUploadedFiles(_),this.props.setPostUpload(!0,"TAGGING","UPLOADED_IMAGES")}}},{key:"render",value:function(){var e=this,t=this.props,_=t.files,r=t.onDragEvent,n=t.isDragOver,i=t.imagesIndex,l=this.state,u=l.imageGrid,p=l.imageContainerHeight,c=l.imageGridWrapperWidth,d=u.columnWidth,h=u.gutterSize,f=[{id:"uploaderBox"}].concat(function(e){if(Array.isArray(e)){for(var t=0,_=Array(e.length);t<e.length;t++)_[t]=e[t];return _}return Array.from(e)}(_));return a.default.createElement(o.Content,{innerRef:this.imageGridWrapperRef,onDragOver:function(e){r(e,"isDragOver",!0)},onDragEnter:function(e){r(e,"isDragOver",!0)},onDragLeave:function(e){r(e,"isDragOver",!1)},onDragEnd:function(e){r(e,"isDragOver",!1)},isDragOver:n},_.length?a.default.createElement(s.default,{key:i,imageGridWrapperWidth:c,imageContainerHeight:p,columnWidth:d,gutterSize:h,count:f.length,list:f,upload:this.upload,onShowMoreImages:this.onShowMoreImages,cellContent:function(t){return"uploaderBox"!==t.item.id?e.renderImage(t):e.renderUploadBox(t)}}):this.renderUploadBox({}))}},{key:"__renderImage__REACT_HOT_LOADER__",value:function(e){var t=this,_=e.style,n=e.columnWidth,i=e.item,l=e.index,u=this.props.uploaderConfig.tagging.active;return a.default.createElement(o.ImageWrapper,{style:r({},_,{width:n}),onClick:function(){t.upload(i)},role:"button",tabIndex:l,onKeyDown:function(e){t.onKeyDown(e,i)}},a.default.createElement("div",{style:{overflow:"hidden"}},a.default.createElement(o.Img,{src:p.getFitResizeImageUrl(i.url_permalink,n,n/(i.ratio||1.6)),height:n/(i.ratio||1.6)})),a.default.createElement(o.ImageDescription,null,a.default.createElement(o.ImageName,null,i.name),u&&a.default.createElement(o.EditIconWrapper,{onClick:function(e){t.onEditImage(e,i)}},a.default.createElement(o.EditIcon,null))))}},{key:"__renderUploadBox__REACT_HOT_LOADER__",value:function(e){var t=e.style,_=void 0===t?{}:t,r=e.columnWidth,n=void 0===r?300:r,i=e.item,l=void 0===i?{}:i,u=this.props.fileDropHandler,s=this.state.isDragOver;return a.default.createElement(o.UploadBoxWrapper,{onDrop:u,method:"post",encType:"multipart/form-data",style:_,columnWidth:n,height:n/(l.ratio||1.6)+20},a.default.createElement(o.UploadBox,{isDragOver:s},a.default.createElement(o.UploadBoxIcon,{className:"sfi-airstore-image"}),a.default.createElement(o.Label,{center:!0},c.I18n.t("file_manager.drag_images_here"))))}}]),t}(),f=(0,l.connect)(function(e){return{uploaderConfig:e.uploader.uploaderConfig}},function(e){return{onModalClose:function(){return e((0,u.modalClose)())}}})(h);t.default=f;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(h,"UploadedImagesContent","/Users/dmitry/2017/airstore-uploader-react/projects/react-plugin/components/UploadedImagesTab/UploadedImagesContent.js"),__REACT_HOT_LOADER__.register(f,"default","/Users/dmitry/2017/airstore-uploader-react/projects/react-plugin/components/UploadedImagesTab/UploadedImagesContent.js"))}}]);