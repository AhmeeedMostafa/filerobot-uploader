(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{686:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),i=r(13),a=r(42),l=r(18),s=r(703),c=r(695),u=r(75),p=r(3),f=r(65);function d(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function g(e,t){return e<<t|e>>>32-t}function m(e,t,r,n,o,i){return d(g(d(d(t,e),d(n,i)),o),r)}function _(e,t,r,n,o,i,a){return m(t&r|~t&n,e,t,o,i,a)}function h(e,t,r,n,o,i,a){return m(t&n|r&~n,e,t,o,i,a)}function y(e,t,r,n,o,i,a){return m(t^r^n,e,t,o,i,a)}function b(e,t,r,n,o,i,a){return m(r^(t|~n),e,t,o,i,a)}function v(e,t){var r,n,o,i,a;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var l=1732584193,s=-271733879,c=-1732584194,u=271733878;for(r=0;r<e.length;r+=16)n=l,o=s,i=c,a=u,l=_(l,s,c,u,e[r],7,-680876936),u=_(u,l,s,c,e[r+1],12,-389564586),c=_(c,u,l,s,e[r+2],17,606105819),s=_(s,c,u,l,e[r+3],22,-1044525330),l=_(l,s,c,u,e[r+4],7,-176418897),u=_(u,l,s,c,e[r+5],12,1200080426),c=_(c,u,l,s,e[r+6],17,-1473231341),s=_(s,c,u,l,e[r+7],22,-45705983),l=_(l,s,c,u,e[r+8],7,1770035416),u=_(u,l,s,c,e[r+9],12,-1958414417),c=_(c,u,l,s,e[r+10],17,-42063),s=_(s,c,u,l,e[r+11],22,-1990404162),l=_(l,s,c,u,e[r+12],7,1804603682),u=_(u,l,s,c,e[r+13],12,-40341101),c=_(c,u,l,s,e[r+14],17,-1502002290),l=h(l,s=_(s,c,u,l,e[r+15],22,1236535329),c,u,e[r+1],5,-165796510),u=h(u,l,s,c,e[r+6],9,-1069501632),c=h(c,u,l,s,e[r+11],14,643717713),s=h(s,c,u,l,e[r],20,-373897302),l=h(l,s,c,u,e[r+5],5,-701558691),u=h(u,l,s,c,e[r+10],9,38016083),c=h(c,u,l,s,e[r+15],14,-660478335),s=h(s,c,u,l,e[r+4],20,-405537848),l=h(l,s,c,u,e[r+9],5,568446438),u=h(u,l,s,c,e[r+14],9,-1019803690),c=h(c,u,l,s,e[r+3],14,-187363961),s=h(s,c,u,l,e[r+8],20,1163531501),l=h(l,s,c,u,e[r+13],5,-1444681467),u=h(u,l,s,c,e[r+2],9,-51403784),c=h(c,u,l,s,e[r+7],14,1735328473),l=y(l,s=h(s,c,u,l,e[r+12],20,-1926607734),c,u,e[r+5],4,-378558),u=y(u,l,s,c,e[r+8],11,-2022574463),c=y(c,u,l,s,e[r+11],16,1839030562),s=y(s,c,u,l,e[r+14],23,-35309556),l=y(l,s,c,u,e[r+1],4,-1530992060),u=y(u,l,s,c,e[r+4],11,1272893353),c=y(c,u,l,s,e[r+7],16,-155497632),s=y(s,c,u,l,e[r+10],23,-1094730640),l=y(l,s,c,u,e[r+13],4,681279174),u=y(u,l,s,c,e[r],11,-358537222),c=y(c,u,l,s,e[r+3],16,-722521979),s=y(s,c,u,l,e[r+6],23,76029189),l=y(l,s,c,u,e[r+9],4,-640364487),u=y(u,l,s,c,e[r+12],11,-421815835),c=y(c,u,l,s,e[r+15],16,530742520),l=b(l,s=y(s,c,u,l,e[r+2],23,-995338651),c,u,e[r],6,-198630844),u=b(u,l,s,c,e[r+7],10,1126891415),c=b(c,u,l,s,e[r+14],15,-1416354905),s=b(s,c,u,l,e[r+5],21,-57434055),l=b(l,s,c,u,e[r+12],6,1700485571),u=b(u,l,s,c,e[r+3],10,-1894986606),c=b(c,u,l,s,e[r+10],15,-1051523),s=b(s,c,u,l,e[r+1],21,-2054922799),l=b(l,s,c,u,e[r+8],6,1873313359),u=b(u,l,s,c,e[r+15],10,-30611744),c=b(c,u,l,s,e[r+6],15,-1560198380),s=b(s,c,u,l,e[r+13],21,1309151649),l=b(l,s,c,u,e[r+4],6,-145523070),u=b(u,l,s,c,e[r+11],10,-1120210379),c=b(c,u,l,s,e[r+2],15,718787259),s=b(s,c,u,l,e[r+9],21,-343485551),l=d(l,n),s=d(s,o),c=d(c,i),u=d(u,a);return[l,s,c,u]}function O(e){var t,r="",n=32*e.length;for(t=0;t<n;t+=8)r+=String.fromCharCode(e[t>>5]>>>t%32&255);return r}function E(e){var t,r=[];for(r[(e.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)r[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return r}function j(e){return O(v(E(e),8*e.length))}function T(e,t){var r,n,o=E(e),i=[],a=[];for(i[15]=a[15]=void 0,o.length>16&&(o=v(o,8*e.length)),r=0;r<16;r+=1)i[r]=909522486^o[r],a[r]=1549556828^o[r];return n=v(i.concat(E(t)),512+8*t.length),O(v(a.concat(n),640))}function R(e){var t,r,n="";for(r=0;r<e.length;r+=1)t=e.charCodeAt(r),n+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return n}function A(e){return unescape(encodeURIComponent(e))}function w(e){return j(A(e))}function S(e){return R(w(e))}function x(e,t){return T(A(e),A(t))}function C(e,t){return R(x(e,t))}function D(e,t,r){return t?r?x(t,e):C(t,e):r?w(e):S(e)}var I=D,U=I,P=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(d,"safeAdd","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(g,"bitRotateLeft","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(m,"md5cmn","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(_,"md5ff","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(h,"md5gg","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(y,"md5hh","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(b,"md5ii","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(v,"binlMD5","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(O,"binl2rstr","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(E,"rstr2binl","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(j,"rstrMD5","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(T,"rstrHMACMD5","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(R,"rstr2hex","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(A,"str2rstrUTF8","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(w,"rawMD5","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(S,"hexMD5","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(x,"rawHMACMD5","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(C,"hexHMACMD5","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(D,"md5","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js"),__REACT_HOT_LOADER__.register(I,"default","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/md5.js")),r(698));function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(d,e);var t,r,n,a,l=(t=d,function(){var e,r=N(t);if(B()){var n=N(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return G(this,e)});function d(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),q(z(e=l.call(this)),"getImageGridWrapperWidth",(function(){return Math.floor(e.imageGridWrapperRef.current.getBoundingClientRect().width)})),q(z(e),"getImageGridWrapperHeight",(function(){return e.imageGridWrapperRef.current.getBoundingClientRect().height})),q(z(e),"updateImageGridColumnWidth",(function(){var t=e.state.imageGrid,r=t.minColumnWidth,n=t.gutterSize,o=e.getImageGridWrapperWidth(),i=e.getImageGridWrapperHeight();t.columnWidth=Object(c.a)(o,r,n),e.setState({imageGridWrapperWidth:o,imageGrid:t,imageContainerHeight:i})})),q(z(e),"onKeyDown",(function(t,r){13===t&&(t.stopPropagation(),e.select(r))})),q(z(e),"select",(function(t){if(e.props.appState.config.uploadParams.opt_force_name)e.props.upload(!0,Object(P.b)(t));else{var r=[F({},t,{public_link:Object(P.b)(t)})];e.props.appState.config.uploadHandler(r,{stage:"select"}),e.props.closeModal()}})),q(z(e),"onTagImage",(function(t,r){if(t.preventDefault(),t.stopPropagation(),e.props.appState.config.tagging.active){var n=[F({},r,{public_link:Object(P.b)(r)})];e.props.saveUploadedFiles(n),e.props.setPostUpload(!0,"TAGGING","MY_GALLERY")}})),q(z(e),"onEditImage",(function(t,r){if(t.preventDefault(),t.stopPropagation(),e.props.appState.config.imageEditor.active){var n=e.props.path,o=[F({},r,{public_link:Object(P.b)(r)})];e.props.saveUploadedFiles(o),e.props.setPostUpload(!0,"IMAGE_EDITOR","MY_GALLERY",{path:n})}})),q(z(e),"renderImage",(function(t){var r=t.style,n=t.columnWidth,a=t.item,l=t.index,s=e.props.appState.config,d=s.tagging,g=s.imageEditor,m=d.active,_=g.active,h=Object(u.b)(a.type),y=Object(c.d)(h?Object(f.a)(Object(P.b)(a)):Object(u.a)(a.type),n,Math.floor(n/(a.ratio||1.6)));return o.a.createElement(i.H,{style:F({},r,{width:Math.floor(n)}),role:"button",tabIndex:l,isNotImage:!h,onKeyDown:function(t){e.onKeyDown(t,a)}},o.a.createElement("div",{style:{overflow:"hidden",background:"rgba(155,155,155,.15)"}},o.a.createElement(i.J,{src:"".concat(y,"?").concat(U(a.modified_at||"").split(0,5)),isNotImage:!h,height:Math.floor(n/(a.ratio||1.6))})),o.a.createElement(i.F,null,o.a.createElement(i.G,null,a.name)),o.a.createElement(i.S,null,_&&h&&o.a.createElement(i.t,{onClick:function(t){e.onEditImage(t,a)}},o.a.createElement(i.s,{fullBr:"4px"},p.I18n.t("file_manager.edit_image"))),m&&o.a.createElement(i.hb,{onClick:function(t){e.onTagImage(t,a)}},o.a.createElement(i.s,{fullBr:"4px"},p.I18n.t("file_manager.tag_image"))),o.a.createElement(i.W,{onClick:function(){e.select(a)}},o.a.createElement(i.s,{fullBr:"4px",success:!0},p.I18n.t("file_manager.select")))))})),q(z(e),"renderUploadBox",(function(t){var r=t.style,n=void 0===r?{}:r,a=t.columnWidth,l=void 0===a?300:a,s=t.item,c=void 0===s?{}:s,u=e.props.fileDropHandler,f=e.state.isDragOver;return o.a.createElement(i.mb,{onDrop:u,method:"post",encType:"multipart/form-data",style:n,columnWidth:l,height:Math.floor(l/(c.ratio||1.6)+20)},o.a.createElement(i.kb,{isDragOver:f},o.a.createElement(i.lb,{className:"sfi-airstore-image"}),o.a.createElement(i.M,{center:!0},p.I18n.t("file_manager.drag_images_here"))))})),e.state={imageGridWrapperWidth:0,imageContainerHeight:0,imageGrid:{columnWidth:0,gutterSize:10,minColumnWidth:200}},e.imageGridWrapperRef=o.a.createRef(),e}return r=d,(n=[{key:"componentDidMount",value:function(){this.updateImageGridColumnWidth()}},{key:"componentDidUpdate",value:function(e,t){this.imageGridWrapperRef.current&&this.getImageGridWrapperWidth()!==t.imageGridWrapperWidth&&this.updateImageGridColumnWidth()}},{key:"render",value:function(){var e=this,t=this.props,r=t.files,n=t.onDragEvent,a=t.isDragOver,l=t.isShowMoreImages,c=t.imagesIndex,u=t.isLoading,p=t.isUpload,f=t.imagesIndexWrapper,d=this.state,g=d.imageGrid,m=d.imageContainerHeight,_=d.imageGridWrapperWidth,h=g.columnWidth,y=g.gutterSize,b=p?[{id:"uploaderBox"}].concat(M(r)):M(r);return o.a.createElement(i.p,{ref:this.imageGridWrapperRef,onDragOver:function(e){n(e,"isDragOver",!0)},onDragEnter:function(e){n(e,"isDragOver",!0)},onDragLeave:function(e){n(e,"isDragOver",!1)},onDragEnd:function(e){n(e,"isDragOver",!1)},isDragOver:a,key:f},r.length?o.a.createElement(s.a,{key:c,imageGridWrapperWidth:_,imageContainerHeight:m,columnWidth:h,gutterSize:y,count:b.length,list:b,upload:this.select,onShowMoreImages:this.props.onShowMoreImages,isShowMoreImages:l,ratio:1.6,additionalImageHeight:20,customPositionHandler:!0,cellContent:function(t){return"uploaderBox"!==t.item.id?e.renderImage(t):e.renderUploadBox(t)}}):"",p&&!r.length&&!u&&this.renderUploadBox({}),o.a.createElement(i.Z,{show:l&&b.length>1}))}}])&&W(r.prototype,n),a&&W(r,a),d}(n.Component),V=Y,J=V,$=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Y,"UploadedImagesContent","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/UploadedImagesContent.js"),__REACT_HOT_LOADER__.register(V,"default","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/UploadedImagesContent.js")),r(6)),Z=r(2),Q=r(33);function X(){var e=pe(["\n  display: ",";\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 199;\n"]);return X=function(){return e},e}function ee(){var e=pe(["\n  display: inline-block;\n  vertical-align: middle;\n  line-height: 1 !important;\n  width: "," !important;\n"]);return ee=function(){return e},e}function te(){var e=pe(["\n  display: inline-block;\n  vertical-align: middle;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  width: ",";\n"]);return te=function(){return e},e}function re(){var e=pe(["\n  display: inline-block;\n  vertical-align: middle;\n  width: 20px;\n  height: 20px;\n  margin: 0 5px 0 0;\n  color: #31b0d5;\n"]);return re=function(){return e},e}function ne(){var e=pe(["\n  position: relative;\n  padding: 5px 20px 5px 10px;\n  cursor: pointer;\n  font-size: 14px;\n  \n  :hover {\n    background: rgba(0, 0, 0, 0.1);\n    \n    .remove-icon-folder {\n      display: inline-block !important;\n    }\n    \n    .settings-icon-folder {\n      display: inline-block !important;\n    }\n  }\n"]);return ne=function(){return e},e}function oe(){var e=pe(["\n  font-size: 18px;\n  top: 16px;\n  \n  :hover {\n    color: #7b8189;\n  }\n"]);return oe=function(){return e},e}function ie(){var e=pe(["\n  line-height: 50px;\n  font-size: 14px;\n"]);return ie=function(){return e},e}function ae(){var e=pe(["\n  height: 50px;\n  color: #5D636B;\n  padding: 0 10px;\n  white-space: nowrap;\n  border-bottom: 1px solid rgb(221,221,221);\n"]);return ae=function(){return e},e}function le(){var e=pe(["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  top: 0;\n  color: #5D636B;\n  margin-left: ",";\n  //visibility: ",";;\n  width: 200px;\n  background: ",";\n  border-right: 1px solid rgb(221,221,221);\n  z-index: 1045;\n  transition: 0.3s margin;\n  overflow: hidden;\n  overflow-y: auto;\n"]);return le=function(){return e},e}function se(){var e=pe(["\n  cursor: pointer;\n  \n  :hover "," {\n    background-color: ",";\n    \n    :before {\n      background-color: ",";\n    }\n  }\n  \n  :hover "," {\n    color: ",";\n  }\n"]);return se=function(){return e},e}function ce(){var e=pe(["\n  width: ",";\n  height: ",";\n  margin: 0 auto;\n  position: relative;\n  display: inline-block;\n  vertical-align: middle;\n  background-color: ",";\n  border-radius: ",";\n  box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.39);\n  margin-right: ",";\n  \n  :before {\n    content: '';\n    width: 50%;\n    height: ",";\n    border-radius: ",";\n    background-color: ",";\n    position: absolute;\n    top: ",";\n    left: 0px;\n  }\n"]);return ce=function(){return e},e}function ue(){var e=pe(["\n  display: inline-block;\n  vertical-align: middle;\n  color: ",";\n  margin-left: 10px;\n  font-size: 14px;\n"]);return ue=function(){return e},e}function pe(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var fe=Z.default.div(ue(),(function(e){return e.theme.text||"#5D636B"})),de=Z.default.div(ce(),(function(e){return e.small?"14px":"17px"}),(function(e){return e.small?"10px":"12px"}),(function(e){return e.theme.buttonBackground||"#708090"}),(function(e){return e.small?"0 1px 1px 1px":"0 2px 2px 2px"}),(function(e){return e.mr?e.mr:"auto"}),(function(e){return e.small?"2px":"3px"}),(function(e){return e.small?"0 1px 0 0":"0 2px 0 0"}),(function(e){return e.theme.buttonBackground||"#708090"}),(function(e){return e.small?"-2px":"-3px"})),ge=Z.default.div(se(),de,(function(e){return e.theme.buttonBackground||"#00707C"}),(function(e){return e.theme.buttonBackground||"#00707C"}),fe,(function(e){return e.theme.buttonBackground||"#00707C"})),me=Z.default.div(le(),(function(e){return e.showFileManager?"0px":"-200px"}),(function(e){return e.showFileManager?"visible":"hidden"}),(function(e){return e.theme.mainBackground})),_e=Z.default.div(ae()),he=Z.default.div(ie()),ye=Object(Z.default)(Q.a)(oe()),be=Z.default.div(ne());be.Icon=Z.default.div.attrs((function(){return{className:"ai-icon-folder"}}))(re()),be.Name=Z.default.div(te(),(function(e){return e.isSelect?"calc(100% - 40px)":"calc(100% - 25px)"})),be.EditName=Z.default.input(ee(),(function(e){return e.isSelect?"calc(100% - 55px)":"calc(100% - 30px)"}));var ve=Z.default.div(X(),(function(e){return e.show?"block":"none"}));"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(fe,"FolderTitle","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/folderManager/folderManager.styled.js"),__REACT_HOT_LOADER__.register(de,"FolderIcon","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/folderManager/folderManager.styled.js"),__REACT_HOT_LOADER__.register(ge,"FolderToggleWrapper","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/folderManager/folderManager.styled.js"),__REACT_HOT_LOADER__.register(me,"FolderManagerWrapper","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/folderManager/folderManager.styled.js"),__REACT_HOT_LOADER__.register(_e,"ManagerHeader","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/folderManager/folderManager.styled.js"),__REACT_HOT_LOADER__.register(he,"ManagerHeaderTitle","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/folderManager/folderManager.styled.js"),__REACT_HOT_LOADER__.register(ye,"CloseManagerBtn","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/folderManager/folderManager.styled.js"),__REACT_HOT_LOADER__.register(be,"Folder","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/folderManager/folderManager.styled.js"),__REACT_HOT_LOADER__.register(ve,"Overlay","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/folderManager/folderManager.styled.js"));function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Te(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?Re(e):t}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(l,e);var t,r,n,i,a=(t=l,function(){var e,r=we(t);if(Ae()){var n=we(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return Te(this,e)});function l(){var e;Ee(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return xe(Re(e=a.call.apply(a,[this].concat(r))),"onClickFolder",(function(t){t.preventDefault(),t.stopPropagation(),e.props.changeFolder(e.props.folder.path)})),e}return r=l,(n=[{key:"render",value:function(){var e=this.props.folder;return o.a.createElement(be,{onClick:this.onClickFolder},o.a.createElement(de,{small:!0,mr:"7px"}),o.a.createElement(be.Name,{title:e.name},e.name))}}])&&je(r.prototype,n),i&&je(r,i),l}(n.Component);"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Ce,"FolderItem","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/folderManager/FolderItem.js");function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ue(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?Pe(e):t}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(s,e);var t,r,i,a,l=(t=s,function(){var e,r=Me(t);if(Le()){var n=Me(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return Ue(this,e)});function s(){var e,t,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),e=l.call(this),t=Pe(e),n=function(){var t=!e.state.showFileManager;e.setState({showFileManager:t})},(r="toggleSideMenu")in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,e.state={showFileManager:!1},e}return r=s,(i=[{key:"render",value:function(){var e=this,t=this.state.showFileManager,r=this.props,i=r.folders,a=void 0===i?[]:i,l=r.path,s=r.rootDir,c=r.isLoading;return o.a.createElement(n.Fragment,null,o.a.createElement(ge,{onClick:this.toggleSideMenu},o.a.createElement(de,null),o.a.createElement(fe,null,p.I18n.t("file_manager.change_folder"))),o.a.createElement(me,{showFileManager:t},o.a.createElement(_e,null,o.a.createElement(he,null,p.I18n.t("file_manager.media_library")),o.a.createElement(ye,{onClick:this.toggleSideMenu})),l&&l!==s&&!c&&o.a.createElement(be,{onClick:this.props.goToLevelUpFolder},o.a.createElement("span",{className:"btn-back"}),o.a.createElement(be.Name,{title:p.I18n.t("file_manager.go_back")},"../")),!c&&a.map((function(t){return o.a.createElement(Ce,{key:t.uuid,folder:t,changeFolder:e.props.changeFolder})}))),o.a.createElement(ve,{show:t,onClick:this.toggleSideMenu}))}}])&&Ie(r.prototype,i),a&&Ie(r,a),s}(n.Component),Fe=ke,We=Fe,Ge=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ke,"FolderManager","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/folderManager/FolderManager.js"),__REACT_HOT_LOADER__.register(Fe,"default","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/folderManager/FolderManager.js")),r(64)),ze=r(4),Be=r.n(ze),Ne=function(e){var t=e.active,r=e.isUp,n=e.color,i=e.flex;return o.a.createElement("span",{className:"sort-tick-wrapper",style:i?{display:"flex"}:{}},t&&o.a.createElement("span",{className:"sort-tick".concat(r?" icon-up":" icon-down").concat(n?" ".concat(n):"")}))};Ne.defaultProps={active:!1,isUp:!1},Ne.propTypes={active:Be.a.bool.isRequired,isUp:Be.a.bool.isRequired};var Ke=Ne,qe=Ke;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ne,"SortTick","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/SortTick.js"),__REACT_HOT_LOADER__.register(Ke,"default","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/SortTick.js"));function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||$e(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e){return function(e){if(Array.isArray(e))return Ze(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||$e(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t){if(e){if("string"==typeof e)return Ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ze(e,t):void 0}}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xe(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?et(e):t}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var it=[["name","Name"],["type","Type"],["uploaded_at","Uploaded"],["modified_at","Modified"]],at=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(s,e);var t,r,n,a,l=(t=s,function(){var e,r=rt(t);if(tt()){var n=rt(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return Xe(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),ot(et(t=l.call(this,e)),"state",{isDropdownOpened:!1}),ot(et(t),"updateSortCosls",(function(){t.setState({sortCols:[].concat(it,Je(t.props.isProductsEnabled?[["product_pos","Product position"],["product_ref","Product reference"]]:[]))})})),ot(et(t),"globalClickHandler",(function(e){var r=e.target,n=(t.dropdownContainerRef||{}).current||null;n&&n!==r&&!n.contains(r)&&t.closeDropdown()})),ot(et(t),"btnClickHandler",(function(e){e.preventDefault(),t.setState((function(e){return{isDropdownOpened:!e.isDropdownOpened}}))})),ot(et(t),"closeDropdown",(function(){t.setState({isDropdownOpened:!1})})),ot(et(t),"sort",(function(e){var r=t.props,n=r.sortParams,o=(n=void 0===n?{}:n).field,i=n.isUp,a=r.applySort;if(o===e)return a({field:o,isUp:!i});a({field:e,isUp:!0})})),ot(et(t),"generateI18nKey",(function(e){return(e||"").toLowerCase().replace(/\s/gi,"_")})),t.dropdownContainerRef=o.a.createRef(),t.state={sortCols:[].concat(it)},t}return r=s,(n=[{key:"componentDidMount",value:function(){this.updateSortCosls(),window.addEventListener("click",this.globalClickHandler)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.globalClickHandler)}},{key:"componentDidUpdate",value:function(e){e.isProductsEnabled!==this.props.isProductsEnabled&&this.updateSortCosls()}},{key:"render",value:function(){var e=this,t=this.props.sortParams,r=(t=void 0===t?{}:t).field,n=t.isUp,a=this.state,l=a.isDropdownOpened,s=a.sortCols,c=((r?s.find((function(e){return Ve(e,1)[0]===r})):null)||[])[1]||null;return o.a.createElement(i.eb,{as:"div",ref:this.dropdownContainerRef,className:"ai-btn default-btn",style:{display:"flex",justifyContent:"center",alignItems:"center",textDecoration:"none",position:"relative"},onClick:this.btnClickHandler},o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r&&o.a.createElement(qe,{flex:!0,color:"white",active:!0,isUp:n}),o.a.createElement("span",{className:"ai-btn-label ai-btn-label-visible"},r?p.I18n.t("upload.".concat(this.generateI18nKey(c||r))):p.I18n.t("upload.sort"))),l&&o.a.createElement("ul",{tabIndex:1,className:"options-dropdown-menu",style:{top:35,left:"50%",width:120,zIndex:1,transform:"translate(-50%)",outline:0}},s.map((function(t){var i=Ve(t,2),a=i[0],l=i[1];return o.a.createElement("li",{key:a,className:r===a?"active":""},o.a.createElement("button",{onClick:e.sort.bind(e,a)},p.I18n.t("upload.".concat(e.generateI18nKey(l||a)))," ",o.a.createElement(qe,{color:"dark",active:r===a,isUp:n})))}))))}}])&&Qe(r.prototype,n),a&&Qe(r,a),s}(n.Component),lt=at,st=lt;at.propTypes={applySort:Be.a.func.isRequired,sortParams:Be.a.object.isRequired};"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(it,"SORT_COLS","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/SortDropdown.js"),__REACT_HOT_LOADER__.register(at,"SortDropdown","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/SortDropdown.js"),__REACT_HOT_LOADER__.register(lt,"default","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/SortDropdown.js"));function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e){return function(e){if(Array.isArray(e))return dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ft(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw i}}return r}(e,t)||ft(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){if(e){if("string"==typeof e)return dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dt(e,t):void 0}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(r),!0).forEach((function(t){Et(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ht(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?yt(e):t}function yt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jt={DEFAULT:"DEFAULT",UPLOADING:"UPLOADING",ERROR:"ERROR",UPLOADED:"UPLOADED"},Tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(u,e);var t,r,n,s,c=(t=u,function(){var e,r=vt(t);if(bt()){var n=vt(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return ht(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),Et(yt(t=c.call(this)),"activateFolder",(function(e){t.setState({files:[],path:e}),t.onGetListFiles(e,0,null,!0)})),Et(yt(t),"fileChangeHandler",(function(e){var r=e.target;t.changeFile(r.files)})),Et(yt(t),"changeFile",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.setState({filesToUpload:e}),setTimeout((function(){e&&t.upload()}))})),Et(yt(t),"upload",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.state.path,o=t.props,i=t.props.appState.config,l=e?[r]:t.state.filesToUpload,s=e?"application/json":"files[]",c=!e&&n;t.uploadStart(),a.j({files:l,config:mt({},i,{onUploadProgress:t.onUploadProgress}),data_type:s,dir:c,showAlert:t.props.showAlert}).then((function(e){var r=pt(e,3),n=r[0],a=r[1];if((r[2]||a)&&t.props.showAlert("",p.I18n.t("upload.file_already_exists"),"info"),t.uploadSuccess(n),i.tagging.active)return t.props.saveUploadedFiles(n),void t.props.setPostUpload(!0,"TAGGING","MY_GALLERY");i.uploadHandler(n,{stage:"upload"}),o.closeModal()})).catch((function(){t.uploadError()}))})),Et(yt(t),"changeStep",(function(e){return t.setState({step:e})})),Et(yt(t),"uploadStart",(function(){return t.setState({step:jt.UPLOADING,files:[]})})),Et(yt(t),"uploadSuccess",(function(e){t.setState({step:jt.UPLOADED,uploadedFiles:e,isDragOver:!1}),t.onGetListFiles(t.state.path)})),Et(yt(t),"uploadError",(function(){t.changeStep(jt.DEFAULT)})),Et(yt(t),"fileDropHandler",(function(e){e.preventDefault(),t.changeFile((e.dataTransfer||e.originalEvent.dataTransfer).files)})),Et(yt(t),"onDragEvent",(function(e,r,n){e.preventDefault(),t.setState(Et({},r,n))})),Et(yt(t),"onSearchChange",(function(e){t.setState({searchPhrase:e.target.value})})),Et(yt(t),"onGetListFiles",(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=t.state,l=i.sortParams,s=i.imagesIndex,c=i.imagesIndexWrapper,u=t.props.appState.config,p=u.container,f=u.uploadKey,d=u.baseAPI,g=u.platform;t.setState({isShowMoreImages:!!r,isLoading:!r}),Object(a.d)({dir:e,container:p,offset:r,uploadKey:f,baseAPI:d,platform:g,sortParams:l}).then((function(e){var i=pt(e,3),a=i[0],l=i[1],u=i[2],p=r?t.state.files:[];t.setState({files:[].concat(ut(p),ut(a)),directories:r?t.state.directories:l,isLoading:!1,isShowMoreImages:!1,offset:r,totalFilesCount:u},(function(){setTimeout((function(){o?t.setState({imagesIndex:s+1,imagesIndexWrapper:c+1}):"function"==typeof n&&n()}))}))})).catch((function(){t.setState({files:[],isLoading:!1,isShowMoreImages:!1})}))})),Et(yt(t),"search",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0,n=t.state,o=n.searchPhrase,i=void 0===o?"":o,l=n.imagesIndex,s=t.props.appState.config,c=s.container,u=s.language,p=s.uploadKey,f=s.baseAPI,d=s.platform;i.length<2&&t.goToDefaultFolder(),t.setState({isShowMoreImages:!!e,isLoading:!e}),Object(a.g)({query:i,language:u,container:c,baseAPI:f,platform:d,offset:e,uploadKey:p}).then((function(n){var o=pt(n,2),i=o[0],a=o[1],s=e?t.state.files:[],c=e;t.setState({files:[].concat(ut(s),ut(i)),isLoading:!1,isShowMoreImages:!1,totalFilesCount:a,offset:e},(function(){setTimeout((function(){t.setState({imagesIndex:c?l:l+1}),"function"==typeof r&&r()}))}))}))})),Et(yt(t),"onShowMoreImages",(function(e){if(!t.state.isShowMoreImages)if(t.state.searchPhrase){var r=t.state,n=r.totalFilesCount,o=r.offset;if(n>o+$.d)return o+=$.d,t.search(o,e)}else{var i=t.state,a=i.totalFilesCount,l=i.offset,s=i.path;if(a>l+$.d)return l+=$.d,t.onGetListFiles(s,l,e)}})),Et(yt(t),"goToLevelUpFolder",(function(e){e.preventDefault(),e.stopPropagation();var r=t.state.path;t.activateFolder(r.slice(0,r.lastIndexOf("/")))})),Et(yt(t),"goToDefaultFolder",(function(){event.preventDefault(),event.stopPropagation(),t.setState({searchPhrase:"",searchInputIndex:t.state.searchInputIndex+1},(function(){t.activateFolder(t.props.appState.config.uploadParams.dir)}))})),Et(yt(t),"onKeyDownSearch",(function(e){Object(f.b)(e)&&t.state.searchPhrase.length>1?t.search():Object(f.b)(e)&&0===t.state.searchPhrase.length&&t.goToDefaultFolder()})),Et(yt(t),"onUploadProgress",(function(e){var r=Math.round(100*e.loaded/e.total);t.setState({progressBar:{status:r,color:r>99?Ge.a.SUCCESS:Ge.a.DEFAULT}})})),Et(yt(t),"applySort",(function(e){var r=t.state,n=r.sortParams,o=r.path,i=mt({},n||{},{},e||{});t.setState({sortParams:i},(function(){t.activateFolder(o)}))})),t.state={searchPhrase:"",isLoading:!1,imagesIndex:0,searchInputIndex:0,files:[],directories:[],isShowMoreImages:!1,showFileManager:!1,path:e.path||e.appState.config.uploadParams.dir,folderBrowser:e.appState.config.folderBrowser,progressBar:{color:Ge.a.DEFAULT,status:0},sortParams:{field:"name",isUp:!0,backend:!1},totalFilesCount:0,imagesIndexWrapper:0},t}return r=u,(n=[{key:"componentDidMount",value:function(){var e=this.state.path;this.onGetListFiles(e)}},{key:"render",value:function(){var e=this,t=this.state,r=t.isLoading,n=t.step,a=t.files,s=t.isDragOver,c=t.imagesIndex,u=t.directories,f=t.path,d=t.folderBrowser,g=t.searchPhrase,m=void 0===g?"":g,_=t.progressBar,h=_.color,y=_.status,b=t.sortParams,v=t.imagesIndexWrapper,O=this.props.appState.config.myGallery.upload,E=m.length<2;return o.a.createElement(i.ob,null,O&&o.a.createElement(i.nb,{type:"file",name:"files[]",ref:function(t){return e.fileInput=t},"data-multiple-caption":"{count} files selected",defaultValue:"",tabIndex:-1,multiple:!0,onChange:this.fileChangeHandler}),o.a.createElement(i.u,null,o.a.createElement(i.P,null,d&&o.a.createElement(We,{path:f,rootDir:this.props.appState.config.uploadParams.dir,folders:u,goToLevelUpFolder:this.goToLevelUpFolder,changeFolder:this.activateFolder,isLoading:r})),o.a.createElement(i.V,null,o.a.createElement(i.T,{padding:"0px"},o.a.createElement(i.L,{searchInputIndex:this.state.searchInputIndex,type:"text",ref:function(t){return e._searchInput=t},autoFocus:!0,value:m,placeholder:p.I18n.t("file_manager.search_by_file_name_tag_desc"),onChange:this.onSearchChange,onKeyDown:this.onKeyDownSearch}),m&&o.a.createElement(i.g,{onClick:this.goToDefaultFolder}),o.a.createElement(i.h,{key:"ok",disabled:E,className:"ae-btn",onClick:function(){e.search()}},p.I18n.t("upload.search")))),o.a.createElement(i.a,null,o.a.createElement(st,{applySort:this.applySort,sortParams:b}),o.a.createElement(i.h,{hide:!O,className:"ae-btn",fullBr:"4px",onClick:function(){e.fileInput.click()}},p.I18n.t("file_manager.upload_images")))),o.a.createElement(J,{imagesIndexWrapper:v,isUpload:O,appState:this.props.appState,upload:this.upload,setAppState:this.props.setAppState,imagesIndex:c,onDragEvent:this.onDragEvent,fileDropHandler:this.fileDropHandler,isDragOver:s,saveUploadedFiles:this.props.saveUploadedFiles,setPostUpload:this.props.setPostUpload,files:a,closeModal:this.props.closeModal,onShowMoreImages:this.onShowMoreImages,isShowMoreImages:this.state.isShowMoreImages,isLoading:r,path:f}),n===jt.UPLOADING&&o.a.createElement(Ge.b,{status:y,color:h}),o.a.createElement(l.a,{overlay:!0,show:r&&n!==jt.UPLOADING}))}}])&&_t(r.prototype,n),s&&_t(r,s),u}(n.Component),Rt=Tt;t.default=Rt,"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(jt,"STEP","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/UploadedImagesTab.js"),__REACT_HOT_LOADER__.register(Tt,"UploadedImagesTab","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/UploadedImagesTab.js"),__REACT_HOT_LOADER__.register(Rt,"default","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/UploadedImagesTab/UploadedImagesTab.js"))},695:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return l})),r.d(t,"c",(function(){return s}));var n=function(e,t,r){return Math.floor((e+r)/(t+r))},o=function(e,t,r){return(e-(t-1)*r)/t},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=n(e,t,r);return o(e,i,r)},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return"https://scaleflex.cloudimg.io/width/".concat(Math.round(t),"/s/").concat(e)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return"https://scaleflex.cloudimg.io/fit/".concat(Math.round(t),"x").concat(Math.round(r),"/ffffff/").concat(e)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return"https://scaleflex.cloudimg.io/crop/".concat(Math.round(t),"x").concat(Math.round(r),"/s/").concat(e)};"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(n,"getColumnCount","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/services/imageGrid.service.js"),__REACT_HOT_LOADER__.register(o,"getColumnWidth","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/services/imageGrid.service.js"),__REACT_HOT_LOADER__.register(i,"getActualColumnWidth","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/services/imageGrid.service.js"),__REACT_HOT_LOADER__.register(a,"getResizeImageUrl","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/services/imageGrid.service.js"),__REACT_HOT_LOADER__.register(l,"getFitResizeImageUrl","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/services/imageGrid.service.js"),__REACT_HOT_LOADER__.register(s,"getCropImageUrl","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/services/imageGrid.service.js"))},698:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return i}));var n=function(e){return e.url&&e.url.permalink?e.url.permalink:e.url_permalink?e.url_permalink:""},o=function(e){return e.url&&e.url.public?e.url.public:e.url_public?e.url_public:""},i=function(e){return e.url&&e.url.cdn?e.url.cdn:""};"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(n,"getPermalink","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/adjustAPI.utils.js"),__REACT_HOT_LOADER__.register(o,"getPubliclink","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/adjustAPI.utils.js"),__REACT_HOT_LOADER__.register(i,"getCDNlink","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/utils/adjustAPI.utils.js"))},703:function(e,t,r){"use strict";var n=r(0),o=r(717),i=r(702),a=r(695);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(h,e);var t,r,l,m,_=(t=h,function(){var e,r=f(t);if(p()){var n=f(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return c(this,e)});function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),g(u(t=_.call(this,e)),"_calculateColumnCount",(function(){var e=t.state,r=e.columnWidth,n=e.gutterSize;t._columnCount=a.b(t._width,r,n)})),g(u(t),"_cellRenderer",(function(e){var r=e.index,i=e.key,a=e.parent,l=e.style,s=t.props,c=s.list,u=s.cellContent,p=t.state.columnWidth,f=c[r];return n.createElement(o.b,{cache:t._cache,index:r,key:i,parent:a},u({style:l,columnWidth:p,item:f,index:r,key:i}))})),g(u(t),"_initCellPositioner",(function(){if(void 0===t._cellPositioner){var e=t.state,r=e.columnWidth,n=e.gutterSize;t._cellPositioner=Object(i.b)({cellMeasurerCache:t._cache,columnCount:t._columnCount,columnWidth:r,spacer:n})}})),g(u(t),"_onResize",(function(e){var r=e.width;r&&(t._width=r),t._calculateColumnCount(),t._resetCellPositioner(),t._setMasonryRef.recomputeCellPositions()})),g(u(t),"_renderAutoSizer",(function(e){var r=e.height,i=e.scrollTop;t._height=r,t._scrollTop=i;var a=t.state.overscanByPixels;return n.createElement(o.a,{ref:function(e){return t.child=e},disableHeight:!0,height:r,onResize:t._onResize,overscanByPixels:a,scrollTop:t._scrollTop},t._renderMasonry)})),g(u(t),"onScroll",(function(e){var r=e.clientHeight,n=e.scrollHeight,o=e.scrollTop,i=u(t),a=t.props,l=a.isShowMoreImages;a.onShowMoreImages&&r+o+600>=n&&!l&&t.props.onShowMoreImages((function(){var e=document.querySelector("div.resize-triggers").parentNode;"9px"===e.style.paddingLeft?e.style.paddingLeft="10px":e.style.paddingLeft="9px","9px"===e.style.paddingRight?e.style.paddingRight="10px":e.style.paddingRight="9px",i.child._onResize()}))})),g(u(t),"getCoordinates",(function(e){var r=t.props,n=r.imageGridWrapperWidth,o=r.ratio,i=r.additionalImageHeight,a=void 0===i?0:i,l=t.state,s=l.columnWidth,c=l.gutterSize,u=t._columnCount||Math.floor(n/s),p=Math.floor(e/u),f=e%u;return{top:Math.floor(s/o+c+a)*p,left:(s+c)*f}})),g(u(t),"_renderMasonry",(function(e){var r=e.width;t._width=r,t._calculateColumnCount(),t._initCellPositioner();var i=t.props,a=i.count,l=i.customPositionHandler,s=t.state,c=s.height,u=s.overscanByPixels,p=s.windowScrollerEnabled;return n.createElement(o.d,{autoHeight:p,cellCount:a,cellMeasurerCache:t._cache,cellPositioner:l?t.getCoordinates:t._cellPositioner,cellRenderer:t._cellRenderer,height:p?t._height:c,overscanByPixels:u,ref:function(e){return t._setMasonryRef=e},scrollTop:t._scrollTop,width:r,onScroll:t.onScroll,tabIndex:-1})})),g(u(t),"_resetCellPositioner",(function(){var e=t.state,r=e.columnWidth,n=e.gutterSize;t._cellPositioner.reset({columnCount:t._columnCount,columnWidth:r,spacer:n})})),g(u(t),"_setMasonryRef",(function(e){t._masonry=e})),t._columnWidth=e.columnWidth||200,t._gutterSize=e.gutterSize||10,t._columnCount=0,t._cache=new o.c({defaultHeight:Math.floor(e.imageContainerHeight)||300,defaultWidth:Math.floor(t._columnWidth),fixedWidth:!1}),t.state={columnWidth:Math.floor(t._columnWidth),height:Math.floor(e.imageContainerHeight)||300,gutterSize:t._gutterSize,overscanByPixels:0,windowScrollerEnabled:!1},t}return r=h,(l=[{key:"render",value:function(){var e=this.state,t=e.overscanByPixels,r=e.windowScrollerEnabled,i=e.height;return r?n.createElement(o.e,{overscanByPixels:t},this._renderAutoSizer):this._renderAutoSizer({height:i})}}])&&s(r.prototype,l),m&&s(r,m),h}(n.PureComponent),_=m;t.a=_;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(m,"ReactVirtualizedImagesGrid","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/VirtualizedImagesGrid.js"),__REACT_HOT_LOADER__.register(_,"default","/Users/dmitry/scaleflex/plugins/filerobot-uploader/projects/react-plugin/components/VirtualizedImagesGrid.js"))}}]);